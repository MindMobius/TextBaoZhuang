<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TextBaoZhuang | 文案的包装与去包装</title>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>

<body class="bg-gray-100 min-h-screen font-sans">
    <div x-data="app()" class="container mx-auto px-6 py-10">
        <div class="flex justify-end items-center">
            <a href="https://github.com/MindMobius/TextBaoZhuang" target="_blank" class="inline-block ml-2">
                <svg class="h-6 w-6 text-gray-600 hover:text-gray-800" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M12 1C5.9225 1 1 5.9225 1 12C1 16.8675 4.14875 20.9787 8.52125 22.4362C9.07125 22.5325 9.2775 22.2025 9.2775 21.9137C9.2775 21.6525 9.26375 20.7862 9.26375 19.865C6.5 20.3737 5.785 19.1912 5.565 18.5725C5.44125 18.2562 4.905 17.28 4.4375 17.0187C4.0525 16.8125 3.5025 16.3037 4.42375 16.29C5.29 16.2762 5.90875 17.0875 6.115 17.4175C7.105 19.0812 8.68625 18.6137 9.31875 18.325C9.415 17.61 9.70375 17.1287 10.02 16.8537C7.5725 16.5787 5.015 15.63 5.015 11.4225C5.015 10.2262 5.44125 9.23625 6.1425 8.46625C6.0325 8.19125 5.6475 7.06375 6.2525 5.55125C6.2525 5.55125 7.17375 5.2625 9.2775 6.67875C10.1575 6.43125 11.0925 6.3075 12.0275 6.3075C12.9625 6.3075 13.8975 6.43125 14.7775 6.67875C16.8813 5.24875 17.8025 5.55125 17.8025 5.55125C18.4075 7.06375 18.0225 8.19125 17.9125 8.46625C18.6138 9.23625 19.04 10.2125 19.04 11.4225C19.04 15.6437 16.4688 16.5787 14.0213 16.8537C14.42 17.1975 14.7638 17.8575 14.7638 18.8887C14.7638 20.36 14.75 21.5425 14.75 21.9137C14.75 22.2025 14.9563 22.5462 15.5063 22.4362C19.8513 20.9787 23 16.8537 23 12C23 5.9225 18.0775 1 12 1Z">
                    </path>
                </svg>
            </a>
            <button @click="showSettings = true"
                class="hover:bg-gray-200 rounded-full p-2 transition-colors duration-200">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-600" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
            </button>
        </div>

        <!-- Header -->
        <header class="mb-8">
            <div class="flex flex-col items-center">
                <h1 class="text-5xl font-bold text-gray-800">TextBaoZhuang</h1>
                <h1 class="mt-2 text-xl font-bold text-gray-400">文案的包装与去包装</h1>
            </div>
            <div class="mt-4 text-gray-600 text-xm">
                <p class="mb-2">
                    <strong>项目介绍：</strong>
                </p>
                <p class="mb-2">
                    看着别人发黑话装X，心里不爽？直接开怼又怕被嘲笑知识储备不足？
                </p>
                <p class="mb-2">
                    TextBaoZhuang 项目就是为了解决这个问题而诞生。
                </p>
                <p class="mb-2">
                    它既能帮你看透那些故作高深的"包装"，洞悉其背后的真实；也能帮你调整文案的"包装等级"，让你也可以随时小装一下。
                </p>
            </div>
        </header>

        <!-- Input Section -->
        <section class="mb-8">
            <div class="bg-white rounded-lg shadow p-6">
                <h2 class="text-xl font-semibold mb-4 text-gray-700">输入文案</h2>
                <textarea x-model="originalText"
                    class="w-full h-64 p-3 border rounded focus:ring-2 focus:ring-blue-200 focus:border-blue-300 transition-shadow duration-200"></textarea>
            </div>
        </section>
        <!-- Navigation Tabs -->
        <nav class="flex border-b mb-6 overflow-x-auto">
            <button @click="currentPage = 'detect'"
                :class="{'border-b-2 border-blue-500 font-medium text-blue-500': currentPage === 'detect', 'text-gray-600 hover:text-gray-800': currentPage !== 'detect'}"
                class="px-6 py-3 whitespace-nowrap">包装识别</button>
            <button @click="currentPage = 'adjust'"
                :class="{'border-b-2 border-blue-500 font-medium text-blue-500': currentPage === 'adjust', 'text-gray-600 hover:text-gray-800': currentPage !== 'adjust'}"
                class="px-6 py-3 whitespace-nowrap">等级调整</button>
            <button @click="currentPage = 'critique'"
                :class="{'border-b-2 border-blue-500 font-medium text-blue-500': currentPage === 'critique', 'text-gray-600 hover:text-gray-800': currentPage !== 'critique'}"
                class="px-6 py-3 whitespace-nowrap">火眼金睛</button>
            <button @click="currentPage = 'hiddenMeaning'"
                :class="{'border-b-2 border-blue-500 font-medium text-blue-500': currentPage === 'hiddenMeaning', 'text-gray-600 hover:text-gray-800': currentPage !== 'hiddenMeaning'}"
                class="px-6 py-3 whitespace-nowrap">言外之意</button>
            <button @click="currentPage = 'styleSummary'"
                :class="{'border-b-2 border-blue-500 font-medium text-blue-500': currentPage === 'styleSummary', 'text-gray-600 hover:text-gray-800': currentPage !== 'styleSummary'}"
                class="px-6 py-3 whitespace-nowrap">风格总结</button>
            <button @click="currentPage = 'textImitation'"
                :class="{'border-b-2 border-blue-500 font-medium text-blue-500': currentPage === 'textImitation', 'text-gray-600 hover:text-gray-800': currentPage !== 'textImitation'}"
                class="px-6 py-3 whitespace-nowrap">文案仿写</button>
            <button @click="currentPage = 'textContinuation'"
                :class="{'border-b-2 border-blue-500 font-medium text-blue-500': currentPage === 'textContinuation', 'text-gray-600 hover:text-gray-800': currentPage !== 'textContinuation'}"
                class="px-6 py-3 whitespace-nowrap">文案续写</button>
            <button @click="currentPage = 'textExpansion'"
                :class="{'border-b-2 border-blue-500 font-medium text-blue-500': currentPage === 'textExpansion', 'text-gray-600 hover:text-gray-800': currentPage !== 'textExpansion'}"
                class="px-6 py-3 whitespace-nowrap">文案扩写</button>
        </nav>

        <!-- Detect Section -->
        <section x-show="currentPage === 'detect'" class="mb-6">
            <div class="bg-white rounded-lg shadow p-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-semibold text-gray-700">包装等级识别</h2>
                    <button @click="detectStyle"
                        class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded transition-colors duration-200">
                        开始识别
                    </button>
                </div>

                <div x-show="detectedLevelText" class="mt-4 p-4 bg-gray-50 rounded">
                    <h3 class="font-semibold mb-2 text-gray-700">识别结果:</h3>
                    <div x-show="detectedLevel !== null" class="text-gray-700">
                        <span x-text="detectedLevelText"></span>
                    </div>
                    <h3 class="font-semibold mb-2 mt-4 text-gray-700">包装点评:</h3>
                    <div x-text="Critique || '等待生成'" class="whitespace-pre-line italic text-gray-800"></div>
                </div>
            </div>
        </section>

        <!-- Adjust Section -->
        <section x-show="currentPage === 'adjust'" class="mb-6">
            <div class="bg-white rounded-lg shadow p-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-semibold text-gray-700">包装等级调整</h2>
                    <button @click="generateText"
                        class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded transition-colors duration-200">
                        生成文案
                    </button>
                </div>

                <div class="flex justify-between text-sm text-gray-600 mt-2">
                    <span>-2</span>
                    <span>-1</span>
                    <span>0</span>
                    <span>1</span>
                    <span>2</span>
                </div>
                <input type="range" x-model="styleLevel" min="-2" max="2" step="1" class="w-full mt-2">
                <div class="flex justify-between text-sm text-gray-600 mt-1">
                    <span>朴实无华</span>
                    <span>不装</span>
                    <span>标准</span>
                    <span>小装一下</span>
                    <span>太**装了</span>
                </div>

                <div x-show="generatedText" class="mt-6">
                    <h2 class="text-xl font-semibold mb-4 text-gray-700">生成结果</h2>
                    <div x-text="generatedText" class="whitespace-pre-line text-gray-800"></div>
                    <div class="flex justify-end space-x-2 mt-4">
                        <button @click="copyGeneratedText"
                            class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded transition-colors duration-200">
                            复制文本
                        </button>
                        <button @click="exportPreview"
                            class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded transition-colors duration-200">
                            导出预览图
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Critique Section -->
        <section x-show="currentPage === 'critique'" class="mb-6">
            <div class="bg-white rounded-lg shadow p-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-semibold text-gray-700">火眼金睛</h2>
                    <button @click="analyzeTruth"
                        class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded transition-colors duration-200">
                        批判一下
                    </button>
                </div>

                <div x-show="truthAnalysis" class="mt-6">
                    <h3 class="font-semibold mb-4 text-gray-700">分析结果:</h3>
                    <div x-text="truthAnalysis" class="whitespace-pre-line text-gray-800"></div>
                </div>
            </div>
        </section>

        <!-- Hidden Meaning Section -->
        <section x-show="currentPage === 'hiddenMeaning'" class="mb-6">
            <div class="bg-white rounded-lg shadow p-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-semibold text-gray-700">言外之意</h2>
                    <button @click="analyzeHiddenMeaning"
                        class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded transition-colors duration-200">
                        分析一下
                    </button>
                </div>

                <div x-show="svgResult" class="mt-6">
                    <h3 class="font-semibold mb-4 text-gray-700">分析结果:</h3>
                    <div x-text="svgResult" class="whitespace-pre-line text-gray-800"></div>
                </div>
            </div>
        </section>

        <!-- Style Summary Section -->
        <section x-show="currentPage === 'styleSummary'" class="mb-6">
            <div class="bg-white rounded-lg shadow p-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-semibold text-gray-700">风格总结</h2>
                    <button @click="summarizeStyle"
                        class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded transition-colors duration-200">
                        总结风格
                    </button>
                </div>

                <div x-show="styleSummaryResult" class="mt-6">
                    <h3 class="font-semibold mb-4 text-gray-700">风格总结结果:</h3>
                    <div x-text="styleSummaryResult" class="whitespace-pre-line text-gray-800"></div>
                </div>
            </div>
        </section>

        <!-- Text Imitation Section -->
        <section x-show="currentPage === 'textImitation'" class="mb-6">
            <div class="bg-white rounded-lg shadow p-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-semibold text-gray-700">文案仿写</h2>
                    <button @click="imitateText"
                        class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded transition-colors duration-200">
                        开始仿写
                    </button>
                </div>

                <div x-show="textImitationResult" class="mt-6">
                    <h3 class="font-semibold mb-4 text-gray-700">文案仿写结果:</h3>
                    <div x-text="textImitationResult" class="whitespace-pre-line text-gray-800"></div>
                </div>
            </div>
        </section>

        <!-- Text Continuation Section -->
        <section x-show="currentPage === 'textContinuation'" class="mb-6">
            <div class="bg-white rounded-lg shadow p-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-semibold text-gray-700">文案续写</h2>
                    <button @click="continueText"
                        class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded transition-colors duration-200">
                        开始续写
                    </button>
                </div>

                <div x-show="textContinuationResult" class="mt-6">
                    <h3 class="font-semibold mb-4 text-gray-700">文案续写结果:</h3>
                    <div x-text="textContinuationResult" class="whitespace-pre-line text-gray-800"></div>
                </div>
            </div>
        </section>

        <!-- Text Expansion Section -->
        <section x-show="currentPage === 'textExpansion'" class="mb-6">
            <div class="bg-white rounded-lg shadow p-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-semibold text-gray-700">文案扩写</h2>
                    <button @click="expandText"
                        class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded transition-colors duration-200">
                        开始扩写
                    </button>
                </div>

                <div x-show="textExpansionResult" class="mt-6">
                    <h3 class="font-semibold mb-4 text-gray-700">文案扩写结果:</h3>
                    <div x-text="textExpansionResult" class="whitespace-pre-line text-gray-800"></div>
                </div>
            </div>
        </section>

        <!-- Settings Modal -->
        <div x-show="showSettings" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4">
            <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
                <h2 class="text-xl font-semibold mb-4 text-gray-800">AI 设置</h2>
                <div class="bg-blue-50 border border-blue-200 rounded p-3 mb-4 text-sm text-blue-800">
                    <p>• 所有AI请求均在您的浏览器本地完成，API密钥不会上传至任何服务器</p>
                    <p>• 推荐从 <a href="https://aistudio.google.com/u/0/apikey" target="_blank"
                            class="text-blue-600 hover:underline font-medium">Google AI Studio</a> 获取免费的 API key</p>
                </div>

                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">提供商</label>
                    <select x-model="settings.provider"
                        @change="settings.baseUrl = PROVIDERS[settings.provider].baseUrl; settings.model = PROVIDERS[settings.provider].defaultModel"
                        class="w-full p-2 border rounded">
                        <template x-for="(provider, key) in { google: 'Google', openai: 'OpenAI', custom: '自定义'}">
                            <option :value="key" x-text="provider"></option>
                        </template>
                    </select>
                </div>

                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Base URL</label>
                    <input x-model="settings.baseUrl" :readonly="settings.provider !== 'custom'"
                        :class="settings.provider !== 'custom' ? 'bg-gray-100' : ''" class="w-full p-2 border rounded"
                        placeholder="输入自定义API地址">
                </div>

                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">模型</label>
                    <div class="flex">
                        <input x-model="settings.model" type="text" class="flex-1 p-2 border rounded"
                            placeholder="输入模型名称或检索获取">
                        <button @click="fetchModels" class="ml-2 bg-gray-200 px-3 rounded hover:bg-gray-300">
                            检索
                        </button>
                    </div>
                </div>

                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">API Key</label>
                    <input x-model="settings.apiKey" type="password" class="w-full p-2 border rounded">
                </div>

                <div class="flex justify-end space-x-2">
                    <button @click="saveSettings"
                        class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                        保存
                    </button>
                    <button @click="showSettings = false" class="bg-gray-300 px-4 py-2 rounded hover:bg-gray-400">
                        取消
                    </button>
                </div>
            </div>
        </div>

        <!-- Preview Modal -->
        <div x-show="showPreview" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4">
            <div class="bg-white rounded-lg shadow-xl w-full max-w-md max-h-screen overflow-auto">
                <div class="p-6">
                    <div class="flex justify-end space-x-2">
                        <button @click="downloadPreview"
                            class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                            下载图片
                        </button>
                        <button @click="showPreview = false" class="bg-gray-300 px-4 py-2 rounded hover:bg-gray-400">
                            关闭
                        </button>
                    </div>
                    <h2 class="text-xl font-semibold mb-4 text-gray-800">预览图</h2>
                    <div id="previewContent" class="mb-4">
                        <img :src="previewImageUrl" alt="文案预览" class="max-w-full">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="prompts.js"></script>
    <script src="app.js"></script>

    <footer class="bg-gray-100 text-center p-4 mt-8">
        <p class="text-xs text-gray-800">
            本项目使用 <a href="https://github.com/MindMobius/TextBaoZhuang?tab=GPL-3.0-1-ov-file" target="_blank"
                class="text-blue-500 hover:underline">GPL-3.0 License</a>
        </p>
    </footer>

</body>

</html>